<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>건강기록 QR 코드 40개</title>
<style>
  body { font-family: Arial, sans-serif; background:#f5f7fa; margin:20px; }
  h1 { text-align:center; }
  #grid { display:flex; flex-wrap:wrap; gap:18px; justify-content:center; }
  .card { width:170px; background:#fff; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.08); padding:10px; text-align:center; }
  .card p { margin:6px 0 8px 0; font-weight:600; }
  canvas { width:150px; height:150px; display:block; margin:0 auto; }
  a.link { display:block; font-size:12px; color:#0b66c3; text-decoration:none; margin-top:6px; word-break:break-all; }
  .note { text-align:center; color:#666; margin-top:14px; font-size:14px; }
</style>

<!-- 간단 오프라인 QR 생성기 (내장) -->

</head>
<body>
<h1 style="text-align:center">건강기록 QR 코드 (로컬용)</h1>
<p class="note" style="text-align:center">스캔하면 같은 폴더의 <code>record_01.html ~ record_40.html</code> 파일을 엽니다.</p>

<div id="grid"></div>



<script>
const SERVER_URL = "https://script.google.com/macros/s/AKfycbzvGtGB_Ab082d4jbaC909Wih-_jzCZek3ZmxJ5CiUSjbSJnA1jgz9VSCuZNkyB4hWs9g/exec";
const USER_ID = location.pathname.split("/").pop().replace(".html","");

function saveData() {
  const data = {
    id: USER_ID,
    name: document.getElementById("name").value,
    history: document.getElementById("history").value,
    hospital: document.getElementById("hospital").value,
    guardian: document.getElementById("guardian").value,
    memo: document.getElementById("etc").value
  };
  fetch(SERVER_URL, { method: "POST", body: JSON.stringify(data) });
}

function loadData() {
  fetch(SERVER_URL + "?id=" + USER_ID)
    .then(res => res.json())
    .then(data => {
      if (!data) return;
      name.value = data.name || "";
      history.value = data.history || "";
      hospital.value = data.hospital || "";
      guardian.value = data.guardian || "";
      etc.value = data.memo || "";
    });
}

document.querySelectorAll("input, textarea").forEach(el => el.addEventListener("input", saveData));
loadData();
</script>

</body>
</html>
