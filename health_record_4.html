<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>개인 건강기록 - 사용자 4</title>
<style>
    body { font-family: Arial, sans-serif; background: #f5f7fa; margin:0; padding:20px; }
    .container { max-width:600px; margin:auto; background:#fff; padding:20px; border-radius:12px; box-shadow:0 0 10px rgba(0,0,0,0.1);}
    h2 { text-align:center; }
    label { font-weight:bold; margin-top:12px; display:block; }
    textarea, input { width:100%; padding:10px; margin-top:6px; border-radius:8px; border:1px solid #ccc; font-size:15px; }
    .save-info { text-align:center; margin-top:15px; color:#666; font-size:14px; }
</style>
</head>
<body>
<div class="container">
    <h2>개인 건강기록 - 사용자 4</h2>

    <label>이름</label>
    <input type="text" id="name" />

    <label>병력 (복용 중인 약물, 알러지 등)</label>
    <textarea id="history" rows="4"></textarea>

    <label>다니는 병원</label>
    <textarea id="hospital" rows="3"></textarea>

    <label>보호자 연락처 및 관계</label>
    <textarea id="guardian" rows="3"></textarea>

    <label>기타사항</label>
    <textarea id="etc" rows="3"></textarea>

    <p class="save-info">※ 입력한 내용은 자동 저장됩니다.</p>
</div>


<script>
const SERVER_URL = "https://script.google.com/macros/s/AKfycbzvGtGB_Ab082d4jbaC909Wih-_jzCZek3ZmxJ5CiUSjbSJnA1jgz9VSCuZNkyB4hWs9g/exec";
const USER_ID = location.pathname.split("/").pop().replace(".html","");

function saveData() {
  const data = {
    id: USER_ID,
    name: document.getElementById("name").value,
    history: document.getElementById("history").value,
    hospital: document.getElementById("hospital").value,
    guardian: document.getElementById("guardian").value,
    memo: document.getElementById("etc").value
  };
  fetch(SERVER_URL, { method: "POST", body: JSON.stringify(data) });
}

function loadData() {
  fetch(SERVER_URL + "?id=" + USER_ID)
    .then(res => res.json())
    .then(data => {
      if (!data) return;
      name.value = data.name || "";
      history.value = data.history || "";
      hospital.value = data.hospital || "";
      guardian.value = data.guardian || "";
      etc.value = data.memo || "";
    });
}

document.querySelectorAll("input, textarea").forEach(el => el.addEventListener("input", saveData));
loadData();
</script>

</body>
</html>
